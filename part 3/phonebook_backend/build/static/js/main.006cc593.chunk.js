(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t.n(o),a=t(14),i=t.n(a),u=t(3),r=t(0),s=function(e){var n=e.onChange;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{onChange:n})]})},l=function(e){var n=e.onSubmit,t=e.nameVal,o=e.noVal,c=e.nameChange,a=e.noChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:c})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:o,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.person,t=e.handleRemove;return Object(r.jsxs)("div",{children:[n.name," ",n.number,Object(r.jsx)("button",{onClick:function(){return t(n.id)},children:"delete"})]})},j=function(e){var n=e.filtered,t=e.handleDelete;return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsx)(d,{person:e,handleRemove:t},e.id)}))})},f=t(4),h=t.n(f),b="https://safe-refuge-95565.herokuapp.com/api/phones",m=function(){return h.a.get(b)},O=function(e){return h.a.post(b,e)},p=function(e){return h.a.delete(b+"/"+e)},v=function(e,n){return h.a.put(b+"/"+e,n)},x=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"added",children:n})},g=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),i=Object(u.a)(a,2),d=i[0],f=i[1],h=Object(o.useState)(""),b=Object(u.a)(h,2),g=b[0],w=b[1],C=Object(o.useState)([]),S=Object(u.a)(C,2),k=S[0],y=S[1],D=Object(o.useState)(null),V=Object(u.a)(D,2),T=V[0],E=V[1];Object(o.useEffect)((function(){console.log("effect"),m().then((function(e){console.log("promise fullfilled"),c(e.data),y(e.data)}))}),[]);return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{message:T}),Object(r.jsx)(s,{onChange:function(e){y(t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())})))}}),Object(r.jsx)("h2",{children:"add new entry"}),Object(r.jsx)(l,{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===d}))){if(window.confirm("Change ".concat(d,"'s number with this one?"))){var n={name:d,number:g};v(t.find((function(e){return e.name===d})).id,n).then((function(e){console.log(e.data),m().then((function(e){c(e.data),y(e.data)})),E("".concat(d,"'s number is updated.")),setTimeout((function(){E(null)}),5e3)})).catch((function(e){E("".concat(d," was already deleted from the server.")),setTimeout((function(){E(null)}),5e3)}))}}else O({name:d,number:g}).then((function(e){m().then((function(e){c(e.data),y(e.data)})),E("".concat(d," is added to phonebook.")),setTimeout((function(){E(null)}),5e3),console.log(e)}));f(""),w("")},nameVal:d,noVal:g,nameChange:function(e){f(e.target.value)},noChange:function(e){w(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(j,{filtered:k,handleDelete:function(e){window.confirm("Do you really want to remove this person?")&&p(e).then((function(n){y(k.filter((function(n){return n.id!==e}))),c(t.filter((function(n){return n.id!==e}))),console.log(n)}))}})]})};t(38);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.006cc593.chunk.js.map